{"name":"Who's got dirt? Server","tagline":"A federated search API for people and organizations","body":"# Who's got dirt? A federated search API for people and organizations\r\n\r\n[![Build Status](https://secure.travis-ci.org/influencemapping/whos_got_dirt-server.png)](https://travis-ci.org/influencemapping/whos_got_dirt-server)\r\n[![Dependency Status](https://gemnasium.com/influencemapping/whos_got_dirt-server.png)](https://gemnasium.com/influencemapping/whos_got_dirt-server)\r\n[![Coverage Status](https://coveralls.io/repos/influencemapping/whos_got_dirt-server/badge.svg)](https://coveralls.io/r/influencemapping/whos_got_dirt-server)\r\n[![Code Climate](https://codeclimate.com/github/influencemapping/whos_got_dirt-server.png)](https://codeclimate.com/github/influencemapping/whos_got_dirt-server)\r\n\r\nThis server provides a single access point to some public data on the web. See the [Ruby gem](https://github.com/influencemapping/whos_got_dirt-gem) for details.\r\n\r\n## Usage\r\n\r\n### People\r\n\r\n`GET /entities?queries=<queries>` where `<queries>` looks like:\r\n\r\n```json\r\n{\r\n  \"q0\": {\r\n    \"query\": {\r\n      \"type\": \"Person\",\r\n      \"name~=\": \"John Smith\",\r\n      \"jurisdiction_code|=\": [\"gb\", \"ie\"],\r\n      \"memberships\": [{\r\n        \"role\": \"director\",\r\n        \"inactive\": false\r\n      }]\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nYou may use any query ID instead of `q0`. Not all APIs support every parameter and operator. **If a parameter or operator is unsupported, it is silently ignored.** See more in the [documentation](http://www.rubydoc.info/gems/whos_got_dirt/WhosGotDirt/Requests/Person).\r\n\r\n**If an API returns an error, its response is silently ignored.** See more in the [documentation](http://www.rubydoc.info/gems/whos_got_dirt/WhosGotDirt/Responses/Person).\r\n\r\nFor example, run `bundle exec rackup` in a Unix shell, and run the following in a Ruby shell:\r\n\r\n```ruby\r\nrequire 'cgi'\r\nrequire 'open-uri'\r\nrequire 'json'\r\n\r\nqueries = <<-EOL\r\n{\r\n  \"q0\": {\r\n    \"query\": {\r\n      \"type\": \"Person\",\r\n      \"name~=\": \"John Smith\",\r\n      \"jurisdiction_code|=\": [\"gb\", \"ie\"],\r\n      \"memberships\": [{\r\n        \"role\": \"director\",\r\n        \"inactive\": false\r\n      }]\r\n    }\r\n  }\r\n}\r\nEOL\r\n\r\nvalue = JSON.dump(JSON.load(queries))\r\n#=> {\"q0\":{\"query\":{\"type\":\"Person\",\"name~=\":\"John Smith\",\"jurisdiction_code|=\":[\"gb\",\"ie\"],\"memberships\":[{\"role\":\"director\",\"inactive\":false}]}}}\r\n\r\nurl = \"http://localhost:9292/entities?queries=#{CGI.escape(value)}\"\r\n#=> http://localhost:9292/entities?queries=%7B%22q0%22%3A%7B%22query%22%3A%7B%22type%22%3A%22Person%22%2C%22name%7E%3D%22%3A%22John+Smith%22%2C%22jurisdiction_code%7C%3D%22%3A%5B%22gb%22%2C%22ie%22%5D%2C%22memberships%22%3A%5B%7B%22role%22%3A%22director%22%2C%22inactive%22%3Afalse%7D%5D%7D%7D%7D\r\n\r\nresults = JSON.load(open(url).read)\r\n#=> {\"q0\"=>\r\n#  {\"count\"=>3915,\r\n#   \"result\"=>\r\n#    [{\"@type\"=>\"Person\",\r\n#      \"name\"=>\"JOHN SMITH\",\r\n#      \"updated_at\"=>\"2014-10-25T00:34:16+00:00\",\r\n#      \"identifiers\"=>[{\"identifier\"=>\"46065070\", \"scheme\"=>\"OpenCorporates\"}],\r\n#      \"contact_details\"=>[],\r\n#      \"links\"=>[{\"url\"=>\"https://opencorporates.com/officers/46065070\", \"note\"=>\"OpenCorporates URL\"}],\r\n#      \"memberships\"=>\r\n#       [{\"role\"=>\"director\",\r\n#         \"start_date\"=>\"2006-11-24\",\r\n#         \"organization\"=>\r\n#          {\"name\"=>\"EVOLUTION (GB) LIMITED\",\r\n#           \"identifiers\"=>[{\"identifier\"=>\"05997209\", \"scheme\"=>\"Company Register\"}],\r\n#           \"links\"=>[{\"url\"=>\"https://opencorporates.com/companies/gb/05997209\", \"note\"=>\"OpenCorporates URL\"}],\r\n#           \"jurisdiction_code\"=>\"gb\"}}],\r\n#      \"current_status\"=>\"CURRENT\",\r\n#      \"jurisdiction_code\"=>\"gb\",\r\n#      \"occupation\"=>\"MANAGER\",\r\n#      \"sources\"=>\r\n#       [{\"url\"=>\"https://api.opencorporates.com/officers/search?inactive=false&jurisdiction_code=gb%7Cie&order=score&position=director&q=John+Smith\", \"note\"=>\"OpenCorporates\"}]},\r\n#    ...]\r\n```\r\n\r\n## Deployment\r\n\r\nIf you are concerned about the privacy or security of this API, deploy your own.\r\n\r\n[![Deploy](https://www.herokucdn.com/deploy/button.png)](https://heroku.com/deploy)\r\n\r\n```\r\nheroku apps:create\r\nheroku addons:create memcachier:dev\r\ngit push heroku master\r\n```\r\n\r\n## Acknowledgements\r\n\r\nMost terms are from [Popolo](http://www.popoloproject.com/). The request and response formats are inspired from the [Metaweb Query Language (MQL)](http://mql.freebaseapps.com/index.html) and the [OpenRefine Reconciliation Service API](https://github.com/OpenRefine/OpenRefine/wiki/Reconciliation-Service-API). Differences from MQL are [documented](/docs/differences-from-freebase.md).\r\n\r\nCopyright (c) 2015 James McKinney, released under the MIT license\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}